using Butterfly.Database.Interfaces;
using Butterfly.HabboHotel.GameClients;namespace Butterfly.HabboHotel.Rooms.Chat.Commands.Cmd{    class emptyitems : IChatCommand    {        public void Execute(GameClient Session, Room Room, RoomUser UserRoom, string[] Params)        {            if (Params.Length > 1 && Session.GetHabbo().HasFuse("fuse_sysadmin"))            {                GameClient clientByUsername = ButterflyEnvironment.GetGame().GetClientManager().GetClientByUsername(Params[1]);                if (clientByUsername != null)                {                    clientByUsername.GetHabbo().GetInventoryComponent().ClearItems();                    Session.SendNotification(ButterflyEnvironment.GetLanguageManager().TryGetValue("empty.dbcleared", Session.Langue));                }                else                {                    using (IQueryAdapter queryreactor = ButterflyEnvironment.GetDatabaseManager().GetQueryReactor())                    {                        queryreactor.SetQuery("SELECT id FROM users WHERE username = @usrname");                        queryreactor.AddParameter("usrname", Params[1]);                        int num = int.Parse(queryreactor.GetString());                        queryreactor.RunQuery("DELETE items, items_limited, user_presents, room_items_moodlight, tele_links, wired_items FROM items LEFT JOIN items_limited ON (items_limited.item_id = items.id) LEFT JOIN user_presents ON (user_presents.item_id = items.id) LEFT JOIN room_items_moodlight ON (room_items_moodlight.item_id = items.id) LEFT JOIN tele_links ON (tele_one_id = items.id) LEFT JOIN wired_items ON (trigger_id = items.id) WHERE user_id = " + num + " AND room_id = '0'");

                        Session.SendNotification(ButterflyEnvironment.GetLanguageManager().TryGetValue("empty.cachecleared", Session.Langue));                    }                }            }            else            {                Session.GetHabbo().GetInventoryComponent().ClearItems();                Session.SendNotification(ButterflyEnvironment.GetLanguageManager().TryGetValue("empty.cleared", Session.Langue));            }        }    }}